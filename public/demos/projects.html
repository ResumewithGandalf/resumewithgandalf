<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title id="page-title"></title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" id="favicon" href="" type="image/png">
    <style>
        /* Embedded styles from style.css */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Merriweather:wght@400;700&display=swap');

        :root {
            --font-primary: 'Poppins', sans-serif;
            --font-secondary: 'Merriweather', serif;

            /* Light Theme */
            --page-bg-light: #f8f9fa;
            --text-color-light: #212529;
            --header-text-light: #1a202c;
            --subtext-color-light: #4a5568;
            --accent-color-light: #FBBF24; /* Yellow */
            --border-color-light: #e2e8f0;

            --resume-btn-bg-light: #FBBF24;
            --resume-btn-text-light: #374151;
            --resume-btn-hover-light: #F59E0B;

            --projects-btn-bg-light: #EF4444;
            --projects-btn-text-light: #ffffff;
            --projects-btn-hover-light: #DC2626;

            --contact-btn-bg-light: #3B82F6;
            --contact-btn-text-light: #ffffff;
            --contact-btn-hover-light: #2563EB;

            --card-bg-light: #ffffff;
            --card-shadow-light: rgba(0, 0, 0, 0.05);

            /* Dark Theme */
            --page-bg-dark: #1a202c;
            --text-color-dark: #e2e8f0;
            --header-text-dark: #f7fafc;
            --subtext-color-dark: #a0aec0;
            --accent-color-dark: #FBBF24;
            --border-color-dark: #2d3748;

            --resume-btn-bg-dark: #FBBF24;
            --resume-btn-text-dark: #1a202c;
            --resume-btn-hover-dark: #F59E0B;

            --projects-btn-bg-dark: #EF4444;
            --projects-btn-text-dark: #ffffff;
            --projects-btn-hover-dark: #DC2626;

            --contact-btn-bg-dark: #3B82F6;
            --contact-btn-text-dark: #ffffff;
            --contact-btn-hover-dark: #2563EB;

            --card-bg-dark: #2d3748;
            --card-shadow-dark: rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: var(--font-primary);
            background-color: var(--page-bg-light);
            color: var(--text-color-light);
        }
        .bg-page-bg { background-color: var(--page-bg-light); }
        .text-text-color { color: var(--text-color-light); }
        .text-header-text { color: var(--header-text-light); }
        .text-subtext-color { color: var(--subtext-color-light); }
        .text-accent-color { color: var(--accent-color-light); }
        .border-border-color { border-color: var(--border-color-light); }

        .bg-resume-btn { background-color: var(--resume-btn-bg-light); }
        .text-resume-btn-text { color: var(--resume-btn-text-light); }
        .hover\\:bg-resume-btn-hover:hover { background-color: var(--resume-btn-hover-light); }

        .bg-projects-btn { background-color: var(--projects-btn-bg-light); }
        .text-projects-btn-text { color: var(--projects-btn-text-light); }
        .hover\\:bg-projects-btn-hover:hover { background-color: var(--projects-btn-hover-light); }

        .bg-contact-btn { background-color: var(--contact-btn-bg-light); }
        .text-contact-btn-text { color: var(--contact-btn-text-light); }
        .hover\\:bg-contact-btn-hover:hover { background-color: var(--contact-btn-hover-light); }

        .bg-card { background-color: var(--card-bg-light); }
        .card-shadow { box-shadow: 0 4px 6px -1px var(--card-shadow-light), 0 2px 4px -1px var(--card-shadow-light); }

        html.dark body {
            background-color: var(--page-bg-dark);
            color: var(--text-color-dark);
        }
        html.dark .bg-page-bg { background-color: var(--page-bg-dark); }
        html.dark .text-text-color { color: var(--text-color-dark); }
        html.dark .text-header-text { color: var(--header-text-dark); }
        html.dark .text-subtext-color { color: var(--subtext-color-dark); }
        html.dark .text-accent-color { color: var(--accent-color-dark); }
        html.dark .border-border-color { border-color: var(--border-color-dark); }

        html.dark .bg-resume-btn { background-color: var(--resume-btn-bg-dark); }
        html.dark .text-resume-btn-text { color: var(--resume-btn-text-dark); }
        html.dark .hover\\:bg-resume-btn-hover:hover { background-color: var(--resume-btn-hover-dark); }

        html.dark .bg-projects-btn { background-color: var(--projects-btn-bg-dark); }
        html.dark .text-projects-btn-text { color: var(--projects-btn-text-dark); }
        html.dark .hover\\:bg-projects-btn-hover:hover { background-color: var(--projects-btn-hover-dark); }

        html.dark .bg-contact-btn { background-color: var(--contact-btn-bg-dark); }
        html.dark .text-contact-btn-text { color: var(--contact-btn-text-dark); }
        html.dark .hover\\:bg-contact-btn-hover:hover { background-color: var(--contact-btn-hover-dark); }

        html.dark .bg-card { background-color: var(--card-bg-dark); }
        html.dark .card-shadow { box-shadow: 0 4px 6px -1px var(--card-shadow-dark), 0 2px 4px -1px var(--card-shadow-dark); }

        /* Animation Utilities */
        .animate-fade-in-down { opacity: 0; animation: fadeInDown 0.8s ease-out forwards; }
        .animate-fade-in-up { opacity: 0; animation: fadeInUp 0.8s ease-out forwards; }
        .animation-delay-200 { animation-delay: 0.2s; }
        .animation-delay-400 { animation-delay: 0.4s; }
        /* .animation-delay-600 { animation-delay: 0.6s; } */ /* Not used on this page */

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Page Specific Titles */
        .page-title {
            font-size: 2.25rem; /* text-4xl */
            line-height: 2.5rem;
        }
        @media (min-width: 640px) { /* sm */
            .page-title {
                font-size: 3rem; /* sm:text-5xl */
                line-height: 1;
            }
        }
        .page-title { /* Common styles for page-title */
            font-weight: 700; /* font-bold */
            color: var(--header-text-light); /* text-header-text */
            margin-bottom: 2rem; /* mb-8 */
            text-align: center;
        }
        html.dark .page-title {
            color: var(--header-text-dark);
        }

        .page-subtitle {
            font-size: 1.125rem; /* text-lg */
            line-height: 1.75rem;
        }
        @media (min-width: 640px) { /* sm */
            .page-subtitle {
                font-size: 1.25rem; /* sm:text-xl */
                line-height: 1.75rem;
            }
        }
        .page-subtitle { /* Common styles for page-subtitle */
            color: var(--subtext-color-light); /* text-subtext-color */
            margin-bottom: 3rem; /* mb-12 */
            text-align: center;
            max-width: 42rem; /* max-w-2xl */
            margin-left: auto;
            margin-right: auto;
        }
        html.dark .page-subtitle {
            color: var(--subtext-color-dark);
        }

        /* Project Card Styling */
        /* These classes are from style.css and will be applied by JS */
        /* .project-card { @apply bg-card rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:transform hover:-translate-y-1; } */
        /* .project-card img { @apply w-full h-48 object-cover; } */
        /* .project-card-content { @apply p-6; } */
        /* .project-card-title { @apply text-xl font-semibold text-header-text mb-2; } */
        /* .project-card-description { @apply text-text-color text-sm mb-4 leading-relaxed; } */
        /* .project-card-tech { @apply text-xs text-accent-color mb-4; } */
        /* .project-card-links a { @apply inline-block text-sm text-accent-color hover:underline mr-4; } */
        /* .project-card-links a i { @apply mr-1; } */


        /* Print Styles */
        @media print {
            body { background-color: #ffffff !important; color: #000000 !important; font-family: 'Times New Roman', Times, serif; font-size: 11pt; }
            header, footer, .no-print, #social-links { display: none !important; }
            .container { max-width: 100% !important; margin: 0 !important; padding: 1cm !important; }
            h1, h2, h3, p, a, li, span { color: #000000 !important; }
            a { text-decoration: underline !important; }
            .project-card { 
                background-color: #ffffff !important; 
                border: 1px solid #eeeeee !important; 
                box-shadow: none !important;
                page-break-inside: avoid;
            }
            .project-card img { display: none; } /* Optionally hide images for print */
        }
    </style>
</head>
<body class="bg-page-bg text-text-color font-primary transition-colors duration-300">

    <header class="py-6 px-4 sm:px-8 fixed top-0 left-0 right-0 z-50 bg-page-bg/80 backdrop-blur-md shadow-sm">
        <nav class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-header-text" id="header-name-link">
                 <span class="text-accent-color">&#9679;</span> <span id="header-name"></span>
            </a>
            <div class="space-x-4 sm:space-x-6 text-sm sm:text-base" id="nav-links"></div>
        </nav>
    </header>

    <main class="container mx-auto mt-28 lg:mt-32 px-4 sm:px-8 py-8">
        <h1 class="page-title animate-fade-in-down" id="main-title"></h1>
        <p class="page-subtitle animate-fade-in-down animation-delay-200" id="main-subtitle"></p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 animate-fade-in-up animation-delay-400" id="projects-grid">
            </div>
    </main>

    <div id="social-links" class="fixed left-2 sm:left-4 top-1/2 transform -translate-y-1/2 space-y-2 p-1.5 sm:p-2 bg-white dark:bg-gray-800 shadow-lg rounded-full no-print hidden md:flex flex-col z-40">
        </div>

    <footer class="text-center py-8 text-subtext-color text-sm border-t border-border-color">
        Last updated: <span id="lastUpdate"></span>
    </footer>

    <script>
        // Embedded configuration from projects.config.json
        const config = {
            "page": {
                "title": "My Tasks - Legolas",
                "favicon": "https://placehold.co/32x32/228B22/FFFFFF?text=LG"
            },
            "header": {
                "name": "Legolas Greenleaf"
            },
            "navigation": {
                "links": [
                    {"text": "Home", "url": "creative-cv.html"},
                    {"text": "Resume", "url": "resume.html"},
                    {"text": "Projects", "url": "projects.html", "active": true},
                    {"text": "Publications", "url": "publications.html"}
                ]
            },
            "main": {
                "title": "My Tasks",
                "subtitle": "Some important things I have done.",
                "projects": [
                    {
                        "id": "project-fellowship-journey",
                        "title": "Journey with the Fellowship",
                        "description": "I was chosen to help Frodo take the One Ring to Mordor. We traveled through many dangerous places together to keep the Ring safe.",
                        "technologies": ["Bow and Arrow", "Scouting", "Elf Eyesight", "Teamwork"],
                        "image": {
                            "src": "https://placehold.co/600x400/228B22/FFFFFF?text=Fellowship+Task",
                            "fallback": "https://placehold.co/600x400/cccccc/999999?text=Fellowship+Task",
                            "alt": "Drawing of the Fellowship's journey"
                        },
                        "links": {
                            "github": "#",
                            "demo": "#"
                        }
                    },
                    {
                        "id": "project-major-battles",
                        "title": "Fought in Big Battles",
                        "description": "I fought in the War of the Ring. This included big battles like Helm's Deep and the fight at Minas Tirith to help defeat the enemy.",
                        "technologies": ["Archery Skill", "Fighting", "Watching Enemy", "Helping Friends"],
                        "image": {
                            "src": "https://placehold.co/600x400/A52A2A/FFFFFF?text=Great+Battles",
                            "fallback": "https://placehold.co/600x400/cccccc/999999?text=Great+Battles",
                            "alt": "Drawing of a battle scene"
                        },
                        "links": {
                            "github": "#"
                        }
                    },
                    {
                        "id": "project-ithilien-friendship",
                        "title": "Helped Rebuild Ithilien",
                        "description": "After the war, I took some Elves to Ithilien to make it beautiful again. I also became good friends with Gimli the Dwarf, and we traveled together.",
                        "technologies": ["Gardening", "Elf Skills", "Friendship", "Building"],
                        "image": {
                            "src": "https://placehold.co/600x400/3CB371/FFFFFF?text=New+Gardens",
                            "fallback": "https://placehold.co/600x400/cccccc/999999?text=New+Gardens",
                            "alt": "Drawing of a beautiful garden"
                        },
                        "links": {
                            "github": "#"
                        }
                    }
                ]
            },
            "socialLinks": {
                "github": "https://github.com/LegolasElf/ForestPath",
                "linkedin": "https://linkedin.com/in/LegolasOfMirkwood",
                "email": "legolas.greenleaf@mirkwood-forest.me",
                "googleScholar": "https://scholar.middle-earth.org/citations?user=LegolasLore"
            },
            "footer": {
                "lastUpdated": "Third Age, Year 3021"
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const htmlElement = document.documentElement;

            // --- Theme Management ---
            function applyTheme(isDark) {
                const themeToggleButton = document.getElementById('theme-toggle-button');
                const themeIcon = document.getElementById('theme-icon');
                if (isDark) {
                    htmlElement.classList.add('dark');
                    if (themeIcon) themeIcon.className = 'fas fa-sun fa-fw';
                } else {
                    htmlElement.classList.remove('dark');
                    if (themeIcon) themeIcon.className = 'fas fa-moon fa-fw';
                }
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            }

            function createThemeToggleButton(container) {
                if (container) {
                    const button = document.createElement('button');
                    button.id = 'theme-toggle-button';
                    button.className = 'p-2 text-subtext-color hover:text-accent-color transition-colors duration-200';
                    button.setAttribute('aria-label', 'Toggle theme');
                    
                    const icon = document.createElement('i');
                    icon.id = 'theme-icon';
                    button.appendChild(icon);

                    button.addEventListener('click', () => {
                        applyTheme(!htmlElement.classList.contains('dark'));
                    });
                    container.appendChild(button);
                }
            }
            
            const socialLinksContainer = document.getElementById('social-links');
            createThemeToggleButton(socialLinksContainer);

            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                applyTheme(true);
            } else {
                applyTheme(false);
            }

            // --- Helper Functions ---
            function setText(elementId, text) {
                const element = document.getElementById(elementId);
                if (element) element.textContent = text || '';
            }

            // --- Populate Page Content ---
            document.title = config.page.title;
            const favicon = document.getElementById('favicon');
            if (favicon) favicon.href = config.page.favicon;

            // Header & Navigation
            setText('header-name', config.header.name);
            const navLinksContainer = document.getElementById('nav-links');
            if (navLinksContainer) {
                navLinksContainer.innerHTML = '';
                config.navigation.links.forEach(linkInfo => {
                    const a = document.createElement('a');
                    a.href = linkInfo.url;
                    a.textContent = linkInfo.text;
                    a.className = 'text-subtext-color hover:text-accent-color transition-colors duration-200';
                    if (linkInfo.active) {
                        a.classList.add('text-accent-color', 'font-semibold');
                    }
                    navLinksContainer.appendChild(a);
                });
            }
            
            // Social Links
            if (socialLinksContainer && config.socialLinks) {
                const sl = config.socialLinks;
                const socialIconsHtml = [
                    sl.github ? `<a href="${sl.github}" target="_blank" rel="noopener noreferrer" class="p-2 text-subtext-color hover:text-accent-color transition-colors duration-200"><i class="fab fa-github fa-fw"></i></a>` : '',
                    sl.linkedin ? `<a href="${sl.linkedin}" target="_blank" rel="noopener noreferrer" class="p-2 text-subtext-color hover:text-accent-color transition-colors duration-200"><i class="fab fa-linkedin fa-fw"></i></a>` : '',
                    sl.email ? `<a href="mailto:${sl.email}" class="p-2 text-subtext-color hover:text-accent-color transition-colors duration-200"><i class="fas fa-envelope fa-fw"></i></a>` : '',
                    sl.googleScholar ? `<a href="${sl.googleScholar}" target="_blank" rel="noopener noreferrer" class="p-2 text-subtext-color hover:text-accent-color transition-colors duration-200"><i class="fas fa-graduation-cap fa-fw"></i></a>` : ''
                ].filter(Boolean).join('');
                const themeButton = socialLinksContainer.querySelector('#theme-toggle-button');
                if (themeButton) {
                    themeButton.insertAdjacentHTML('beforebegin', socialIconsHtml);
                } else {
                    socialLinksContainer.innerHTML = socialIconsHtml + socialLinksContainer.innerHTML;
                }
            }

            // Main Content
            setText('main-title', config.main.title);
            setText('main-subtitle', config.main.subtitle);

            const projectsGrid = document.getElementById('projects-grid');
            if (projectsGrid && config.main && config.main.projects) {
                projectsGrid.innerHTML = ''; // Clear existing
                config.main.projects.forEach(project => {
                    const card = document.createElement('div');
                    // Applying classes from style.css for .project-card and its children
                    card.className = 'project-card bg-card rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:transform hover:-translate-y-1';
                    
                    let imageHtml = '';
                    if (project.image) {
                        imageHtml = `<img src="${project.image.src}" alt="${project.image.alt}" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='${project.image.fallback || 'https://placehold.co/600x400/cccccc/999999?text=Image+Not+Found'}';">`;
                    }

                    let linksHtml = '';
                    if (project.links) {
                        if (project.links.github && project.links.github !== "#") {
                            linksHtml += `<a href="${project.links.github}" target="_blank" rel="noopener noreferrer" class="inline-block text-sm text-accent-color hover:underline mr-4"><i class="fab fa-github mr-1"></i>GitHub</a>`;
                        }
                        if (project.links.demo && project.links.demo !== "#") {
                            linksHtml += `<a href="${project.links.demo}" target="_blank" rel="noopener noreferrer" class="inline-block text-sm text-accent-color hover:underline"><i class="fas fa-external-link-alt mr-1"></i>Demo</a>`;
                        }
                    }

                    card.innerHTML = `
                        ${imageHtml}
                        <div class="project-card-content p-6">
                            <h3 class="project-card-title text-xl font-semibold text-header-text mb-2">${project.title}</h3>
                            <p class="project-card-description text-text-color text-sm mb-4 leading-relaxed">${project.description}</p>
                            ${project.technologies && project.technologies.length > 0 ? `<p class="project-card-tech text-xs text-accent-color mb-4"><strong>Technologies:</strong> ${project.technologies.join(', ')}</p>` : ''}
                            <div class="project-card-links">
                                ${linksHtml}
                            </div>
                        </div>
                    `;
                    projectsGrid.appendChild(card);
                });
            }

            // Footer
            setText('lastUpdate', config.footer.lastUpdated);
        });
    </script>
</body>
</html>
